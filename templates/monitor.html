{% extends 'base.html' %}
{% block content %}
    <div>
        <h1>MONITOR</h1>
        <p>Connections: <span id="connections">?</span></p>

        <div id="clients">

        </div>
    </div>

    <script type="text/javascript">
        let socket = io();
        const connectionsElement = document.querySelector('#connections');
        const clientsElement = document.querySelector('#clients');

        socket.on('client_connected', (amount, name) => {
            connectionsElement.innerText = amount;

            let clientElement = document.createElement('p');
            clientElement.id = "client-" + name;
            clientElement.innerText = name;
            clientElement.append(clientElement);
        });

        socket.on('client_disconnected', (amount, name) => {
            connectionsElement.innerText = amount;
            document.getElementById('client-' + name).remove();
        });
    </script>
{% endblock %}